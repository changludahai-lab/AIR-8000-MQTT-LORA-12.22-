import{_ as y,r as i,a as V,c as x,o as h,b as m,d as s,w as a,e as k,f as l,u as L,g as U,E as p}from"./index-Brn--QeS.js";import{useUserStore as B}from"./user-BRWAe11E.js";import"./index-CI8IjGWB.js";const E={class:"login-container"},N={class:"login-box"},R={__name:"Login",setup(S){const c=L(),f=B(),d=i(null),n=i(!1),o=V({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]};async function g(){var e,t;if(await d.value.validate().catch(()=>!1)){n.value=!0;try{await f.login(o.username,o.password),p.success("登录成功"),c.push("/")}catch(r){(t=(e=r.response)==null?void 0:e.data)!=null&&t.message&&p.error(r.response.data.message)}finally{n.value=!1}}}return(w,e)=>{const t=l("el-input"),r=l("el-form-item"),v=l("el-button"),b=l("el-form");return h(),x("div",E,[m("div",N,[e[3]||(e[3]=m("h2",null,"加油站液位监控平台",-1)),s(b,{model:o,rules:_,ref_key:"formRef",ref:d,onSubmit:k(g,["prevent"])},{default:a(()=>[s(r,{prop:"username"},{default:a(()=>[s(t,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=u=>o.username=u),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(r,{prop:"password"},{default:a(()=>[s(t,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=u=>o.password=u),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(r,null,{default:a(()=>[s(v,{type:"primary",loading:n.value,"native-type":"submit",style:{width:"100%"}},{default:a(()=>[...e[2]||(e[2]=[U(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},I=y(R,[["__scopeId","data-v-2b41742b"]]);export{I as default};
