import{useUserStore as v}from"./user-B_yB4m5z.js";import{_ as x,h,i as f,f as l,c as w,o as m,b as a,d as e,w as t,j as k,k as A,l as u,m as C,n as E,p as N,v as V,q as I,s as L,t as B,u as M,x as b,g as y,y as T,z as $,E as z,A as F}from"./index-CjpewyOQ.js";import"./index-DPVtAufC.js";const H={class:"sidebar"},R={__name:"Sidebar",setup(g){const _=h(),r=v(),i=f(()=>_.path),d=f(()=>r.isAdmin);return(c,n)=>{const s=l("el-icon"),o=l("el-menu-item"),p=l("el-menu");return m(),w("div",H,[n[7]||(n[7]=a("div",{class:"logo"},"监控平台",-1)),e(p,{"default-active":i.value,router:"","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"},{default:t(()=>[e(o,{index:"/"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(C))]),_:1}),n[0]||(n[0]=a("span",null,"首页",-1))]),_:1}),e(o,{index:"/stations"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(E))]),_:1}),n[1]||(n[1]=a("span",null,"加油站管理",-1))]),_:1}),e(o,{index:"/devices"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(N))]),_:1}),n[2]||(n[2]=a("span",null,"设备管理",-1))]),_:1}),e(o,{index:"/monitor"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(V))]),_:1}),n[3]||(n[3]=a("span",null,"设备监控",-1))]),_:1}),e(o,{index:"/alarms"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(I))]),_:1}),n[4]||(n[4]=a("span",null,"报警日志",-1))]),_:1}),e(o,{index:"/comm-logs"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(L))]),_:1}),n[5]||(n[5]=a("span",null,"通讯记录",-1))]),_:1}),d.value?(m(),k(o,{key:0,index:"/users"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(B))]),_:1}),n[6]||(n[6]=a("span",null,"用户管理",-1))]),_:1})):A("",!0)]),_:1},8,["default-active"])])}}},U=x(R,[["__scopeId","data-v-1b16b338"]]),j={class:"header"},q={class:"header-right"},D={class:"user-info"},P={class:"username"},G={__name:"Header",setup(g){const _=M(),r=v(),i=f(()=>{var n;return((n=r.user)==null?void 0:n.username)||"未知用户"}),d=f(()=>r.isAdmin);async function c(){try{await $.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await r.logout(),z.success("已退出登录"),_.push("/login")}catch{}}return(n,s)=>{const o=l("el-icon"),p=l("el-tag"),S=l("el-button");return m(),w("div",j,[s[1]||(s[1]=a("div",{class:"header-left"},[a("span",{class:"title"},"加油站液位监控平台")],-1)),a("div",q,[a("span",D,[e(o,null,{default:t(()=>[e(u(B))]),_:1}),a("span",P,b(i.value),1),e(p,{size:"small",type:d.value?"danger":"info"},{default:t(()=>[y(b(d.value?"管理员":"普通用户"),1)]),_:1},8,["type"])]),e(S,{type:"primary",text:"",onClick:c},{default:t(()=>[e(o,null,{default:t(()=>[e(u(T))]),_:1}),s[0]||(s[0]=y(" 退出登录 ",-1))]),_:1})])])}}},J=x(G,[["__scopeId","data-v-5b88f847"]]),K={__name:"Layout",setup(g){const _=v();return F(async()=>{_.user||await _.fetchCurrentUser()}),(r,i)=>{const d=l("el-aside"),c=l("el-header"),n=l("router-view"),s=l("el-main"),o=l("el-container");return m(),k(o,{class:"layout-container"},{default:t(()=>[e(d,{width:"200px"},{default:t(()=>[e(U)]),_:1}),e(o,null,{default:t(()=>[e(c,null,{default:t(()=>[e(J)]),_:1}),e(s,null,{default:t(()=>[e(n)]),_:1})]),_:1})]),_:1})}}},X=x(K,[["__scopeId","data-v-21f4aac9"]]);export{X as default};
