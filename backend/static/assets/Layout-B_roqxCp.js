import{useUserStore as v}from"./user-DFQzhDDG.js";import{_ as x,h as S,i as f,f as l,c as w,o as m,b as a,d as e,w as t,j as h,k as C,l as u,m as E,n as A,p as N,v as V,q as I,s as k,u as L,t as y,g as b,x as M,y as T,E as $,z}from"./index-BCm-iu0U.js";import"./index-D-6YZA5Z.js";const F={class:"sidebar"},H={__name:"Sidebar",setup(g){const r=S(),_=v(),i=f(()=>r.path),d=f(()=>_.isAdmin);return(c,n)=>{const s=l("el-icon"),o=l("el-menu-item"),p=l("el-menu");return m(),w("div",F,[n[6]||(n[6]=a("div",{class:"logo"},"监控平台",-1)),e(p,{"default-active":i.value,router:"","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"},{default:t(()=>[e(o,{index:"/"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(E))]),_:1}),n[0]||(n[0]=a("span",null,"首页",-1))]),_:1}),e(o,{index:"/stations"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(A))]),_:1}),n[1]||(n[1]=a("span",null,"加油站管理",-1))]),_:1}),e(o,{index:"/devices"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(N))]),_:1}),n[2]||(n[2]=a("span",null,"设备管理",-1))]),_:1}),e(o,{index:"/monitor"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(V))]),_:1}),n[3]||(n[3]=a("span",null,"设备监控",-1))]),_:1}),e(o,{index:"/alarms"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(I))]),_:1}),n[4]||(n[4]=a("span",null,"报警日志",-1))]),_:1}),d.value?(m(),h(o,{key:0,index:"/users"},{default:t(()=>[e(s,null,{default:t(()=>[e(u(k))]),_:1}),n[5]||(n[5]=a("span",null,"用户管理",-1))]),_:1})):C("",!0)]),_:1},8,["default-active"])])}}},R=x(H,[["__scopeId","data-v-78dde158"]]),U={class:"header"},j={class:"header-right"},q={class:"user-info"},D={class:"username"},P={__name:"Header",setup(g){const r=L(),_=v(),i=f(()=>{var n;return((n=_.user)==null?void 0:n.username)||"未知用户"}),d=f(()=>_.isAdmin);async function c(){try{await T.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.logout(),$.success("已退出登录"),r.push("/login")}catch{}}return(n,s)=>{const o=l("el-icon"),p=l("el-tag"),B=l("el-button");return m(),w("div",U,[s[1]||(s[1]=a("div",{class:"header-left"},[a("span",{class:"title"},"加油站液位监控平台")],-1)),a("div",j,[a("span",q,[e(o,null,{default:t(()=>[e(u(k))]),_:1}),a("span",D,y(i.value),1),e(p,{size:"small",type:d.value?"danger":"info"},{default:t(()=>[b(y(d.value?"管理员":"普通用户"),1)]),_:1},8,["type"])]),e(B,{type:"primary",text:"",onClick:c},{default:t(()=>[e(o,null,{default:t(()=>[e(u(M))]),_:1}),s[0]||(s[0]=b(" 退出登录 ",-1))]),_:1})])])}}},G=x(P,[["__scopeId","data-v-5b88f847"]]),J={__name:"Layout",setup(g){const r=v();return z(async()=>{r.user||await r.fetchCurrentUser()}),(_,i)=>{const d=l("el-aside"),c=l("el-header"),n=l("router-view"),s=l("el-main"),o=l("el-container");return m(),h(o,{class:"layout-container"},{default:t(()=>[e(d,{width:"200px"},{default:t(()=>[e(R)]),_:1}),e(o,null,{default:t(()=>[e(c,null,{default:t(()=>[e(G)]),_:1}),e(s,null,{default:t(()=>[e(n)]),_:1})]),_:1})]),_:1})}}},W=x(J,[["__scopeId","data-v-21f4aac9"]]);export{W as default};
